{"version":3,"names":[],"mappings":"","sources":["import.js"],"sourcesContent":["'use strict'\n\nconst i18n\t\t\t\t= require( './i18n.min' )\n\nconst { remote }\t\t= require( '@electron/remote' )\nconst app\t\t\t\t= remote.app\nconst dialog\t\t\t= remote.dialog\nconst path\t\t\t\t= require('path')\nconst Store\t\t\t\t= require( 'electron-store' )\nconst store\t\t\t\t= new Store()\nconst fs\t\t\t\t= require( 'fs-extra' )\nconst log\t\t\t\t= require( 'electron-log' )\n\n\nmodule.exports.importFile = function( callback ) {\n\t\n\tdialog.showOpenDialog(remote.getCurrentWindow(), {\n\t\t\n\t\tdefaultPath: app.getPath( 'home' ),\n\t\tbuttonLabel: i18n.t('app:dialog.button.import', 'Import File'),\n\t\tmessage: i18n.t( 'app:dialog.message.import', 'You can import the following file formats: .md, .txt'),\n\t\tproperties: [\t'openFile',\n\t\t\t\t\t\t'openDirectory'\n\t\t\t\t\t],\n\t\tfilters: [\n\t\t\t\t{\tname:\t\t'notes',\n\t\t\t\t\textensions:\t['md', 'txt']\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t\n\t).then((data) => {\n\t\t\n\t\tif( data.canceled === false ) {\n\t\t\t\n\t\t\tlet\tfilename = path.basename( data.filePaths[0] )\n\t\t\t\n\t\t\tfs.readFile( data.filePaths[0], 'utf8', function ( err, filecontents ) {\n\t\t\t\n\t\t\t\tif ( err ) {\n\t\t\t\t\t\n\t\t\t\t\treturn log.info( err )\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet body\n\t\t\t\t\n\t\t\t\tswitch( store.get( 'categories.selected' ) ) {\n\t\t\t\t\n\t\t\t\t\tcase '##all##':\n\t\t\t\t\tcase '##none##':\n\t\t\t\t\t\t\n\t\t\t\t\t\tbody = {\n\t\t\t\t\t\t\t\"content\": filecontents\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tbreak\n\t\t\t\t\t\n\t\t\t\t\tcase '##fav##':\n\t\t\t\t\t\t\n\t\t\t\t\t\tbody = {\n\t\t\t\t\t\t\t\"content\": filecontents,\n\t\t\t\t\t\t\t\"favorite\": true\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tbreak\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t\n\t\t\t\t\t\tbody = {\n\t\t\t\t\t\t\t\"content\": filecontents,\n\t\t\t\t\t\t\t\"category\": $('.categories li button.selected').data('category')\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcallback( filename, body )\n\t\t\t})\n\t\t}\n\t})\n}\n"],"file":"../import.min.js"}